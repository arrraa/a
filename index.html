<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script type="text/javascript">
      jQuery.ajaxSetup({
          cache: true
      });
  var dd
  jQuery.getJSON("d.json", function(j) {
    dd=j
    var mywork = dd.mywork
    jQuery( "#vv" ).empty()
    for(var i=0; i < mywork.length; i++) {
      var r = mywork[i]
      if (r.s && r.s.indexOf('[공지') > -1) continue   		   

      var ij = r.u ? 't/' + r.t + r.u : r.f			   
      jQuery( "#gl" ).append("<div class=\"video\" style=\"cursor:pointer;\" onClick=\"view("+ r.i+",'mywork')\">\n    <div class=\"video__thumbnail\">\n      <img src=\"" + ij + "\" />\n    </div>\n    <div class=\"video__details\">\n      <div class=\"author\">\n        <img src=\"http://aninex.com/images/srvc/web_de_icon.png\" />\n      </div>\n      <div class=\"title\">\n        <h3>" + r.s + "</h3>\n        <span>" + r.d + "</span>\n      </div>\n    </div>\n  </div>");
    }
  });
  function view (id, c) {
   var url = new URL(window.location);
url.searchParams.set('i', id);
url.searchParams.set('s', '');

if (c) url.searchParams.set('c', c);
window.history.pushState({}, '', url);
va(id)
  }
  function va (id) {
var ii = getQueryVariable("i");
var cx = getQueryVariable("c") || 'mywork';

if (ii) {
  var rd = dd[cx].find(function (a) {return a.i == ii})
  var tt = "<div style=\"text-align:center;\"><h2>"+ rd.s +"</h2>" + rd.d +"<br><img width=\"100%\" src=\""+ rd.f +"\">"
  if (rd.x) tt +="<br><img width=\"100%\" src=\""+ rd.x +"\"><br>"
  if ((rd.m || '').length > 1)tt +=rd.m
  tt += '</div><br>'
  jQuery( "#vv" ).html(tt)
  $("#rv").animate({scrollTop: $("#rv").offset().top - 100});

  // jQuery('#gl').scrollTop()
}
// } else if (c) {
//   jQuery( "#gl" ).empty()
// for(var n = 0; n < n + 30; n++) {
//       var r = dd[ct][n]
//       if (!r) continue			   
//       jQuery( "#gl" ).append("<div class=\"video\" style=\"cursor:pointer;\" onClick=\"view("+ r.i+ ")\">\n    <div class=\"video__thumbnail\">\n      <img src=\"" + r.f + "\" />\n    </div>\n    <div class=\"video__details\">\n      <div class=\"author\">\n        <img src=\"http://aninex.com/images/srvc/web_de_icon.png\" />\n      </div>\n      <div class=\"title\">\n        <h3>" + r.s + "</h3>\n        <span>" + r.d + "</span>\n      </div>\n    </div>\n  </div>");
//     }
// }
}
function sc (c) {
  view('', c)
ct = c
$("#rv").animate({scrollTop: $("#rv").offset().top - 100});
jQuery( "#vv" ).empty()
jQuery( "#gl" ).empty()
var cx = getQueryVariable("c") || 'mywork';
var iz = dd[cx]
for(var i = 0; i < iz.length; i++) {
      var r = dd[cx][i]	
      var ij = r.u ? 't/' + r.t + r.u : r.f
      if (r.s && r.s.indexOf('[공지') > -1) continue   		   
      jQuery( "#gl" ).append("<div class=\"video\" style=\"cursor:pointer;\" onClick=\"view("+ r.i+ ")\">\n    <div class=\"video__thumbnail\">\n      <img src=\"" + ij + "\" />\n    </div>\n    <div class=\"video__details\">\n      <div class=\"author\">\n        <img src=\"http://aninex.com/images/srvc/web_de_icon.png\" />\n      </div>\n      <div class=\"title\">\n        <h3>" + r.s + "</h3>\n        <span>" + r.d + "</span>\n      </div>\n    </div>\n  </div>");
    }
    jQuery(".bl").show()
}
function getQueryVariable(variable) {
    var query = window.location.search.substring(1);
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
        }
    }
}

window.onpopstate = function() {
var ct =getQueryVariable("c") || 'mywork';
var tx=getQueryVariable("s");
  jQuery( "#gl" ).empty()
  jQuery( "#vv" ).empty()
  if (tx) {
      var stt = []
        Object.keys(dd).forEach(function _ (u) {
          var xa = dd[u].filter(function q(z) {return (z.s.indexOf(tx) > -1 || z.m.indexOf(tx) > -1)})
          xa.forEach(function q_(ir){
            stt.push(Object.assign({}, ir, {tu: u}))
          })
        })
        jQuery( "#gl" ).empty()
        jQuery( "#vv" ).empty()

for(var nn = 0; nn < stt.length; nn++) {
      var r = stt[nn]
      if (!r) continue
      if (r.s && r.s.indexOf('[공지') > -1) continue   		   
      var ij = r.u ? 't/' + r.t + r.u : r.f		   
      jQuery( "#gl" ).append("<div class=\"video\" style=\"cursor:pointer;\" onClick=\"view("+ r.i+",'" +r.tu  + "')\">\n    <div class=\"video__thumbnail\">\n      <img src=\"" + ij +  "\" />\n    </div>\n    <div class=\"video__details\">\n      <div class=\"author\">\n        <img src=\"http://aninex.com/images/srvc/web_de_icon.png\" />\n      </div>\n      <div class=\"title\">\n        <h3>" + r.s + "</h3>\n        <span>" + r.d + "</span>\n      </div>\n    </div>\n  </div>");
    }
    return
    }

for(var nn = 0; nn < dd[ct].length; nn++) {
      var r = dd[ct][nn]
      if (r.s && r.s.indexOf('[공지') > -1) continue   		   
      var ij = r.u ? 't/' + r.t + r.u : r.f		   
      jQuery( "#gl" ).append("<div class=\"video\" style=\"cursor:pointer;\" onClick=\"view("+ r.i+ ")\">\n    <div class=\"video__thumbnail\">\n      <img src=\"" + ij +  "\" />\n    </div>\n    <div class=\"video__details\">\n      <div class=\"author\">\n        <img src=\"http://aninex.com/images/srvc/web_de_icon.png\" />\n      </div>\n      <div class=\"title\">\n        <h3>" + r.s + "</h3>\n        <span>" + r.d + "</span>\n      </div>\n    </div>\n  </div>");
    }


}
var url = new URL(window.location);
url.searchParams.set('c', 'mywork');
window.history.pushState({}, '', url);
$( document ).ready(function() {
  
$("#bs").click(function(e) {
    e.preventDefault();
  var tx = $('#ss').val()

if (tx.length < 2) { 
  alert('검색어를 2글자 이상 입력해주세요')
  return
}
jQuery( "#vv" ).empty()

var url = new URL(window.location);
url.searchParams.set('s', tx);
window.history.pushState({}, '', url);
  var stt = []
  Object.keys(dd).forEach(function _ (u) {
    var xa = dd[u].filter(function q(z) {return (z.s.indexOf(tx) > -1 || z.m.indexOf(tx) > -1)})
    xa.forEach(function q_(ir){
      stt.push(Object.assign({}, ir, {tu: u}))
    })
  })
  jQuery( "#gl" ).empty()
for(var nn = 0; nn < stt.length; nn++) {
var r = stt[nn]
if (!r) continue
if (r.s && r.s.indexOf('[공지') > -1) continue   		   

var ij = r.u ? 't/' + r.t + r.u : r.f
jQuery( "#gl" ).append("<div class=\"video\" style=\"cursor:pointer;\" onClick=\"view("+ r.i+",'" +r.tu  + "')\">\n    <div class=\"video__thumbnail\">\n      <img src=\"" + ij +  "\" />\n    </div>\n    <div class=\"video__details\">\n      <div class=\"author\">\n        <img src=\"http://aninex.com/images/srvc/web_de_icon.png\" />\n      </div>\n      <div class=\"title\">\n        <h3>" + r.s + "</h3>\n        <span>" + r.d + "</span>\n      </div>\n    </div>\n  </div>");
}
});
$("#ss").on("keydown",function search(e) {
    if(e.keyCode == 13) {
      e.preventDefault();
      var tx = $(this).val()

      if (tx.length < 2) { 
        alert('검색어를 2글자 이상 입력해주세요')
        return
      }
      jQuery( "#vv" ).empty()

      var url = new URL(window.location);
url.searchParams.set('s', tx);
window.history.pushState({}, '', url);
        var stt = []
        Object.keys(dd).forEach(function _ (u) {
          var xa = dd[u].filter(function q(z) {console.log(z);return (z.s.indexOf(tx) > -1 || z.m.indexOf(tx) > -1)})
          xa.forEach(function q_(ir){
            stt.push(Object.assign({}, ir, {tu: u}))
          })
        })
        jQuery( "#gl" ).empty()
for(var nn = 0; nn < stt.length; nn++) {
      var r = stt[nn]
      if (!r) continue
      if (r.s && r.s.indexOf('[공지') > -1) continue   		   

      var ij = r.u ? 't/' + r.t + r.u : r.f	
      jQuery( "#gl" ).append("<div class=\"video\" style=\"cursor:pointer;\" onClick=\"view("+ r.i+",'" +r.tu  + "')\">\n    <div class=\"video__thumbnail\">\n      <img src=\"" + ij +  "\" />\n    </div>\n    <div class=\"video__details\">\n      <div class=\"author\">\n        <img src=\"http://aninex.com/images/srvc/web_de_icon.png\" />\n      </div>\n      <div class=\"title\">\n        <h3>" + r.s + "</h3>\n        <span>" + r.d + "</span>\n      </div>\n    </div>\n  </div>");
    }
}
    })
});
function shows() {
  if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
 jQuery(".header__search").show()
 jQuery("#tii").hide()
 jQuery("#ds").hide()
}
}
  </script>
<style>
.bl {
  display: block;
  width: 100%;
  border: none;
  outline: none;
  padding: 14px 28px;
  font-size: 16px;
  cursor: pointer;
  text-align: center;
}

</style>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <!-- CSS File -->
    <link rel="stylesheet" href="styles.css" />
    <title>정용근 아티스트</title>
  </head>
  <body>
    <!-- Header Starts -->
    <div class="header">
      <div class="header__left">
        <i id="menu" class="material-icons">menu</i>
        <img id="tii" src="a/title.jpg" />
      </div>

      <div class="header__search">
        <form action="">
          <input id="ss" type="text" placeholder="정용근 아티스트 통합검색" />
          <button id="bs"><i class="material-icons">search</i></button>
        </form>
      </div>

      <div class="header__icons">
        <i id="ds" class="material-icons display-this" onclick="shows()">search</i>
        <i class="material-icons">videocam</i>
        <i class="material-icons">apps</i>
        <i class="material-icons">notifications</i>
      </div>
    </div>
    <!-- Header Ends -->

    <!-- Main Body Starts -->
    <div class="mainBody">
      <!-- Sidebar Starts -->
      <div id ="sd" class="sidebar">
        <div class="sidebar__categories">
          <div class="sidebar__category" onclick="sc('mywork')">
            <i class="material-icons">emoji_events</i>
            <span>용근작품</span>
          </div>
          <div class="sidebar__category" onclick="sc('mywork2')">
            <i class="material-icons">verified</i>
            <span>소장품</span>
          </div>
          <div class="sidebar__category" onclick="sc('student')">
            <i class="material-icons">face</i>
            <span>학생작품</span>
          </div>
        </div>
        <hr />
        <div class="sidebar__categories">
          <div class="sidebar__category" onclick="sc('gamsang')">
            <i class="material-icons">color_lens</i>
            <span>미술감상</span>
          </div>
          <div class="sidebar__category" onclick="sc('memory')">
            <i class="material-icons">photo_camera_front</i>
            <span>추억의 흔적</span>
          </div>
          <div class="sidebar__category" onclick="sc('old')">
            <i class="material-icons">mosque</i>
            <span>골동품</span>
          </div>
          <div class="sidebar__category" onclick="sc('story')">
            <i class="material-icons">connecting_airports</i>
            <span>전시 및 기행문</span>
          </div>
          <div class="sidebar__category" onclick="sc('life')">
            <i class="material-icons">wb_incandescent</i>
            <span>미술과생활</span>
          </div>
        </div>
        <hr />
      </div>
      <!-- Sidebar Ends -->
      <!-- Videos Section -->
      <div id="rv" class="videos">
        <div id="vv">로딩중입니다. 잠시만 기다리세요...</div>
        <div class="videos__container" id="gl"></div>
      </div>
    </div>
    <script src="index.js"></script>
    <!-- Main Body Ends -->
  </body>
</html>
